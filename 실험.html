<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°•ìŠ¤ ì´ë™í•˜ê¸°</title>
    <style>
        html, body {
            padding: 0px;
            margin: 0; /* bodyì˜ ê¸°ë³¸ ë§ˆì§„ ì œê±° */
        }
        div.nav > button {
            width: 60px;
            height: 60px;
        }
        div.nav {
            height: 100px;
            background-color: aqua;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        div#box {
            width: 150px;
            height: 150px;
            background-color: cadetblue;
            position: absolute; /* box ìš”ì†Œì˜ ì¢Œí‘œ(ìœ„ì¹˜) ë³€ê²½í•˜ê¸° ìœ„í•¨*/
            /* ì´ˆê¸° ìœ„ì¹˜ ì„¤ì • (ì„ íƒ ì‚¬í•­ì´ì§€ë§Œ absoluteì—ëŠ” í•„ìˆ˜ì ) */
            top: 100px; /* nav ì•„ë˜ì—ì„œ ì‹œì‘ */
            left: 50%;
            transform: translateX(-50%); /* ì´ˆê¸° ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
        }
        div.main {
            background-color: antiquewhite;
            height: calc(100vh - 100px);
            display: flex;
            justify-content: center;
            align-items: center;
            /* mainì´ absolute boxì˜ ê¸°ì¤€ì´ ë˜ë„ë¡ position: relative; ì¶”ê°€ */
            position: relative;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="nav" id="nav">
            <button id="topBtn">ğŸ‘†</button>
            <button id="downBtn">ğŸ‘‡</button>
            <button id="leftBtn">ğŸ‘ˆ</button>
            <button id="rightBtn">ğŸ‘‰</button>
        </div>
        <div class="main">
            <div id="box"></div>
        </div>
    </div>

    <script>
        const container = document.getElementById('container');
        const box = document.getElementById('box');
        const mainDiv = document.querySelector('.main'); // main div ìš”ì†Œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

        // ì´ˆê¸° ìœ„ì¹˜ì™€ í¬ê¸° ì„¤ì • (CSSì—ì„œ ì„¤ì •í•´ë„ ë¨)
        // box.style.left = '50%'; // ì´ˆê¸° ê°€ë¡œ ìœ„ì¹˜
        // box.style.transform = 'translateX(-50%)'; // ê°€ë¡œ ì¤‘ì•™ ì •ë ¬
        // box.style.top = '100px'; // nav ì•„ë˜ì—ì„œ ì‹œì‘

        document.body.addEventListener('keydown', e => {
            console.log('ì´ë²¤íŠ¸ì •ë³´', e);
            let currentLeft = box.offsetLeft;
            let currentTop = box.offsetTop;
            const boxWidth = box.offsetWidth;
            const boxHeight = box.offsetHeight;

            // mainDivì˜ ìœ„ì¹˜ì™€ í¬ê¸° (ìƒëŒ€ ìœ„ì¹˜ë¡œ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì— offsetLeft/Topì´ 0ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤)
            // boxì˜ positionì´ absoluteì´ë¯€ë¡œ, ë¶€ëª¨ì¸ mainDivì˜ positionì´ relativeì¼ ë•Œ,
            // boxì˜ top/leftëŠ” mainDivë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•©ë‹ˆë‹¤.
            // ë”°ë¼ì„œ mainDivì˜ ë‚´ë¶€ ê²½ê³„ëŠ” 0ë¶€í„° mainDivì˜ í¬ê¸°ê¹Œì§€ë¡œ ê°„ì£¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            // mainDivì— position: relative;ë¥¼ ì¶”ê°€í•˜ì—¬ ë°•ìŠ¤ì˜ ê¸°ì¤€ì„ mainDivë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.
            const mainWidth = mainDiv.offsetWidth;
            const mainHeight = mainDiv.offsetHeight;

            // boxì˜ í˜„ì¬ ìœ„ì¹˜ëŠ” mainDiv ë‚´ë¶€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ìœ„í•´
            // offsetLeft/Topì—ì„œ mainDivì˜ offsetLeft/Topì„ ë¹¼ì¤ë‹ˆë‹¤.
            // CSSì—ì„œ position: relative;ë¥¼ mainDivì— ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ,
            // box.offsetLeft/Topì€ ì´ì œ mainDiv ë‚´ë¶€ ê¸°ì¤€ ì¢Œí‘œê°€ ë©ë‹ˆë‹¤.
            // ë§Œì•½ mainDivì— position: relative;ë¥¼ ì¶”ê°€í•˜ì§€ ì•Šì•˜ë‹¤ë©´
            // currentLeft = box.getBoundingClientRect().left - mainDiv.getBoundingClientRect().left;
            // currentTop = box.getBoundingClientRect().top - mainDiv.getBoundingClientRect().top;
            // ì™€ ê°™ì´ ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤.
            // í•˜ì§€ë§Œ CSSì— position: relative; mainDivì— ì¶”ê°€í•˜ëŠ” ê²ƒì´ ë” ê°„ë‹¨í•©ë‹ˆë‹¤.

            switch (e.key) {
                case 'ArrowUp':
                    console.log('ë°©í–¥ ìœ„ë¥¼ ëˆŒë €ìŠµë‹ˆë‹¤.');
                    // boxì˜ ìƒë‹¨ì´ mainDivì˜ ìƒë‹¨(0)ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì•„ì•¼ í•¨
                    if (currentTop - 10 >= 0) {
                        box.style.top = (currentTop - 10) + 'px';
                    } else {
                        box.style.top = '0px'; // ìµœì†Œ ê²½ê³„ë¡œ ì„¤ì •
                    }
                    break;
                case 'ArrowDown':
                    console.log('ë°©í–¥ ë°‘ì„ ëˆŒë €ìŠµë‹ˆë‹¤.');
                    // boxì˜ ì•„ë˜ìª½ ëì´ mainDivì˜ ì•„ë˜ìª½ ëë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì•„ì•¼ í•¨
                    if (currentTop + boxHeight + 10 <= mainHeight) {
                        box.style.top = (currentTop + 10) + 'px';
                    } else {
                        box.style.top = (mainHeight - boxHeight) + 'px'; // ìµœëŒ€ ê²½ê³„ë¡œ ì„¤ì •
                    }
                    break;
                case 'ArrowRight':
                    console.log('ë°©í–¥ ì˜¤ë¥¸ìª½ì„ ëˆŒë €ìŠµë‹ˆë‹¤.');
                    // boxì˜ ì˜¤ë¥¸ìª½ ëì´ mainDivì˜ ì˜¤ë¥¸ìª½ ëë³´ë‹¤ ì‘ê±°ë‚˜ ê°™ì•„ì•¼ í•¨
                    if (currentLeft + boxWidth + 10 <= mainWidth) {
                        box.style.left = (currentLeft + 10) + 'px';
                    } else {
                        box.style.left = (mainWidth - boxWidth) + 'px'; // ìµœëŒ€ ê²½ê³„ë¡œ ì„¤ì •
                    }
                    break;
                case 'ArrowLeft':
                    console.log('ë°©í–¥ ì™¼ìª½ì„ ëˆŒë €ìŠµë‹ˆë‹¤.');
                    // boxì˜ ì™¼ìª½ì´ mainDivì˜ ì™¼ìª½(0)ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì•„ì•¼ í•¨
                    if (currentLeft - 10 >= 0) {
                        box.style.left = (currentLeft - 10) + 'px';
                    } else {
                        box.style.left = '0px'; // ìµœì†Œ ê²½ê³„ë¡œ ì„¤ì •
                    }
                    break;
            }
        });

        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ë°•ìŠ¤ í¬ê¸° ì¡°ì ˆ)
        container.addEventListener('click', function(event) {
            if (event.target.tagName === 'BUTTON') {
                console.log("ì´ë²¤íŠ¸ íƒ€ì…:", event.type);
                console.log("í´ë¦­í•œ ìœ„ì¹˜:", event.clientX, event.clientY);
                console.log("í´ë¦­í•œ ìš”ì†Œ ì´ë¦„:", event.target.id);

                let currentWidth = box.offsetWidth;
                let currentHeight = box.offsetHeight;

                // ìµœì†Œ/ìµœëŒ€ í¬ê¸° ì œí•œ
                const minSize = 50;
                const maxSize = Math.min(mainDiv.offsetWidth, mainDiv.offsetHeight); // mainDiv í¬ê¸° ì•ˆì—ì„œ ì œí•œ

                switch (event.target.id) { // switch ë¬¸ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ê°€ë…ì„± ë†’ì„
                    case 'topBtn': // ë†’ì´ ì¤„ì´ê¸°
                        console.log('ë°•ìŠ¤ê°€ ì‘ì•„ì§‘ë‹ˆë‹¤.(ë†’ì´)');
                        if (currentHeight - 10 >= minSize) {
                            box.style.height = (currentHeight - 10) + 'px';
                        }
                        break;
                    case 'downBtn': // ë†’ì´ ëŠ˜ë¦¬ê¸°
                        console.log('ë°•ìŠ¤ê°€ ì»¤ì§‘ë‹ˆë‹¤.(ë†’ì´)');
                        if (currentHeight + 10 <= maxSize) { // mainDiv ë†’ì´ ì•ˆì—ì„œ ì œí•œ
                            box.style.height = (currentHeight + 10) + 'px';
                        }
                        break;
                    case 'leftBtn': // ë„ˆë¹„ ì¤„ì´ê¸°
                        console.log('ë°•ìŠ¤ê°€ ì‘ì•„ì§‘ë‹ˆë‹¤.(ë„ˆë¹„)');
                        if (currentWidth - 10 >= minSize) {
                            box.style.width = (currentWidth - 10) + 'px';
                        }
                        break;
                    case 'rightBtn': // ë„ˆë¹„ ëŠ˜ë¦¬ê¸°
                        console.log('ë°•ìŠ¤ê°€ ì»¤ì§‘ë‹ˆë‹¤.(ë„ˆë¹„)');
                        if (currentWidth + 10 <= maxSize) { // mainDiv ë„ˆë¹„ ì•ˆì—ì„œ ì œí•œ
                            box.style.width = (currentWidth + 10) + 'px';
                        }
                        break;
                }
            }
        });
    </script>
</body>
</html>